Stripe.setPublishableKey(wc_stripe_info.publishableKey),jQuery(function($){function e(){var e=$("#wc_stripe-creditcard-form");wc_stripe_info.hasCard&&e.hide(),s.on("change",'input[name="wc_stripe_card"]',function(){"new"===$('input[name="wc_stripe_card"]:checked').val()?e.slideDown(200):e.slideUp(200)}),$(".wc_stripe-card-number").payment("formatCardNumber").after('<span class="wc_stripe-card-image"></span>'),$(".wc_stripe-card-expiry").payment("formatCardExpiry"),$(".wc_stripe-card-cvc").payment("formatCardCVC").focus(function(){$(".wc_stripe-card-number").addClass("cvc")}).blur(function(){$(".wc_stripe-card-number").removeClass("cvc")})}function r(){if($("#payment_method_wc_stripe").is(":checked")&&(!$('input[name="wc_stripe_card"]').length||"new"===$('input[name="wc_stripe_card"]:checked').val())&&!$("input.stripe_token").length){var e=$(".wc_stripe-card-expiry").payment("cardExpiryVal"),r={number:$(".wc_stripe-card-number").val()||"",cvc:$(".wc_stripe-card-cvc").val()||"",exp_month:e.month||"",exp_year:e.year||"",name:$(".wc_stripe-billing-name").val()||$("#billing_first_name").val()+" "+$("#billing_last_name").val()||"",address_line1:$("#billing_address_1").val()||"",address_line2:$("#billing_address_2").val()||"",address_state:$("#billing_state").val()||"",address_zip:$(".wc_stripe-billing-zip").val()||$("#billing_postcode").val()||"",address_country:$("#billing_country").val()||""};return s.block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.ajax_loader_url+") no-repeat center",opacity:.6}}),n(r)?(Stripe.createToken(r,a),!1):!0}return!0}function a(e,r){r.error?($(".payment-errors, .stripe_token, .form_errors").remove(),$ccForm.before('<span class="payment-errors required">'+r.error.message+"</span>"),s.unblock()):(s.append('<input type="hidden" class="stripe_token" name="stripe_token" value="'+r.id+'"/>'),s.submit())}function n(e){var r=o(e);if(r.action="stripe_form_validation",r.errors.length)return $.post(wc_stripe_info.ajaxurl,r,function(e){e.indexOf("<!--WC_STRIPE_START-->")>=0&&(e=e.split("<!--WC_STRIPE_START-->")[1]),e.indexOf("<!--WC_STRIPE_END-->")>=0&&(e=e.split("<!--WC_STRIPE_END-->")[0]);var r=$.parseJSON(e);$("body").off(".wc_stripe"),$("body").on("checkout_error.wc_stripe",function(){r.messages.indexOf('<ul class="woocommerce-error">')>=0&&(r.messages=r.messages.split('<ul class="woocommerce-error">')[1]),r.messages.indexOf("</ul>")>=0&&(r.messages=r.messages.split("</ul>")[0]),$(".woocommerce-error").append(r.messages)}),$(".woocommerce-error").remove(),s.prepend(r.messages)}),$(".stripe_token, .form_errors").remove(),$ccForm.append('<input type="hidden" class="form_errors" name="form_errors" value="1">'),s.unblock(),!1;var a={errors:[]};return $.post(wc_stripe_info.ajaxurl,a),s.find(".woocommerce-error").remove(),!0}function o(e){var r={errors:[]};return e.number?$.payment.validateCardNumber(e.number)||r.errors.push({field:"number",type:"invalid"}):r.errors.push({field:"number",type:"undefined"}),e.exp_month&&e.exp_year?$.payment.validateCardExpiry(e.exp_month,e.exp_year)||r.errors.push({field:"expiration",type:"invalid"}):r.errors.push({field:"expiration",type:"undefined"}),e.cvc?$.payment.validateCardCVC(e.cvc,$.payment.cardType(e.number))||r.errors.push({field:"cvc",type:"invalid"}):r.errors.push({field:"cvc",type:"undefined"}),r}var i=$("body"),s=$("form.checkout, form#order_review");s.attr("novalidate","novalidate"),$(window).on("load.wc_stripe",e),i.on("updated_checkout.wc_stripe",function(){e()}),$("form.checkout").on("checkout_place_order_wc_stripe",function(){return r()}),$("form#order_review").on("submit",function(){return r()}),s.on("keyup change",'#card-number, #card-expiry, #card-cvc, input[name="wc_stripe_card"]',function(){$(".woocommerce_error, .woocommerce-error, .woocommerce-message, .woocommerce_message, .stripe_token, .form_errors").remove()})});
//# sourceMappingURL=./wc_stripe.min.map